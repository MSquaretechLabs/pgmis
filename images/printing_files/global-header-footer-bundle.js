
(function(){'use strict';angular.module('globalHeader.controllers',[]);})();(function(){'use strict';angular.module('globalHeader.services',[]);})();(function(){'use strict';var NS='globalHeader.directives';angular.module(NS,['globalHeader.services']);})();(function(){'use strict';var module,APP='globalHeader';module=angular.module('globalHeader',['restangular','ngRoute','ngSanitize','ngCookies','ipCookie','ngAnimate','isLocalization','common.filters','common.services','common.directives',[APP,'.controllers'].join(''),[APP,'.directives'].join(''),[APP,'.services'].join('')]);module.config(['RestangularProvider','url','siteLang','isLocalizeProvider','translations','$locationProvider',function(RestangularProvider,url,siteLang,isLocalizeProvider,translations,$loc){var cache={};RestangularProvider.setBaseUrl('/api/');RestangularProvider.setDefaultHeaders({'Content-Type':'application/json'});RestangularProvider.setResponseExtractor(function(response){return response.data;});$loc.html5Mode(true);cache[siteLang]=translations;isLocalizeProvider.setOptions({baseUrl:['/static/','js/angular/apps/header/','i18n/'].join(''),language:siteLang,cache:cache,loadResourceOnInit:true});}]);angular.element(document).ready(function(){angular.bootstrap(angular.element('header[role="global"]'),['globalHeader']);});}());(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('AcctCtrl',['$scope','$attrs','$filter','$injectedData','userService','accountService','orderService',function($scope,$attrs,$filter,$injectedData,userService,accountService,orderService){$scope.init=function(){$scope.userId=$attrs.userid||null;$scope.loadAccountData($scope.userId);if(angular.isDefined($injectedData.isUserLoggedIn)){$scope.loggedIn=$injectedData.isUserLoggedIn;}else{$scope.loggedIn=false;}};$scope.loadAccountData=function(userId){$scope.subsRemaining=0;$scope.creditsPayAsYouGo=0;$scope.creditSubs=0;$scope.hasActualSuspendedSubscription=false;$scope.subsExpirationStatus=[];$scope.hasActiveSubscription=false;if(userId){userService.getUser(userId).then(function(user){$scope.hasPurchased=user.hasPurchased;if($scope.hasPurchased){userService.activeSubscription(userId).then(function(subscription){if(subscription.userHasActiveSubscription){if(subscription.payload&&subscription.payload.length!==0){$scope.hasActiveSubscription=true;$scope.subsRemaining=$filter('number')(subscription.payload.downloadCount.remaining,0);}}});}});userService.hasActualSuspendedSubscription(userId).then(function(suspended){$scope.hasActualSuspendedSubscription=suspended.hasActualSuspendedSubscription;});userService.subscriptionExpirationStatus($attrs.userid).then(function(expirationStatus){$scope.subsExpirationStatus=expirationStatus;});accountService.getAccount(userId).then(function(account){$scope.corporateAccount=account.isCorporateMaster||account.isCorporateSlave;$scope.creditsPayAsYouGo=$filter('number')(account.balance[8],0);$scope.creditSubs=$filter('number')(account.balance[5],0);});}};$scope.$on('UPDATE_HEADER_NAME',function(response,data){$scope.userId=data.userId;$scope.loggedIn=data.loggedIn;});$scope.$on('UPDATE_HEADER_AMOUNT',function(response,data){var orderId=data.orderId;$scope.totalCredits=0;orderService.getOrder(orderId,$scope.userId,'credits').then(function(data){angular.forEach(data.orderItems,function(value){$scope.totalCredits+=value.Points;});$scope.creditsPayAsYouGo=parseInt($scope.creditsPayAsYouGo,10)+$scope.totalCredits;});});$scope.init();}]);}());(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('NotificationCtrl',['$scope','$attrs','$filter','ipCookie','notificationService','userService',function($scope,$attrs,$filter,ipCookie,notificationService,userService){if($attrs.userid){userService.subscriptionExpirationStatus($attrs.userid).then(function(expirationStatus){var bannerCookie=ipCookie('iStockSubsExp_'+
expirationStatus.orderId+'_'+
expirationStatus.daysRange);if(expirationStatus.isExpiring&&!bannerCookie){var message,link,callback=function(){var expiration=(expirationStatus.daysRange===0)?1:expirationStatus.daysRange;ipCookie('iStockSubsExp_'+
expirationStatus.orderId+'_'+
expirationStatus.daysRange,'Closed',{path:'/',expires:expiration,domain:'.istockphoto.com'});};if(expirationStatus.isExpired){message=$scope.translateMessage('SUBSCRIPTION_IS_EXPIRED');link=$scope.translateLink('REACTIVATE_NOW');notificationService.createNotification('warning','SUBSCRIPTION_EXPRESSION|'+message+'|'+link,callback);}else{if(expirationStatus.daysRange===60||expirationStatus.daysRange===30){message=$scope.translateMessage('SUBSCRIPTION_ENDING_MULTI_DAYS',expirationStatus.actualDays);link=$scope.translateLink('RENEW_TODAY');notificationService.createNotification('warning','SUBSCRIPTION_EXPRESSION|'+message+'|'+link,callback);}else if(expirationStatus.daysRange===1){message=$scope.translateMessage('SUBSCRIPTION_IS_ENDING_DAY',expirationStatus.actualDays);link=$scope.translateLink('RENEW_TODAY_TO_AVOID');notificationService.createNotification('warning','SUBSCRIPTION_EXPRESSION|'+message+'|'+link,callback);}else if(expirationStatus.daysRange>1&&expirationStatus.daysRange<8){message=$scope.translateMessage('SUBSCRIPTION_ENDING_MULTI_DAYS',expirationStatus.actualDays);link=$scope.translateLink('RENEW_TODAY_TO_AVOID');notificationService.createNotification('warning','SUBSCRIPTION_EXPRESSION|'+message+'|'+link,callback);}else if(expirationStatus.daysRange===0){message=$scope.translateMessage('SUBSCRIPTION_IS_ENDING_TODAY');link=$scope.translateLink('RENEW_NOW');notificationService.createNotification('warning','SUBSCRIPTION_EXPRESSION|'+message+'|'+link,callback);}}}});}
notificationService.init();$scope.notifications=notificationService.getNotifications();$scope.translateMessage=function(translate,actualDays){if(actualDays!==undefined){return $filter('i18n')(translate,actualDays);}
return $filter('i18n')(translate);};$scope.translateLink=function(translate){return'<a href="/user_view.php">'+$filter('i18n')(translate)+' ></a>';};}]);}());(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('HeaderCtrl',['$scope','$injectedData',function($scope,$injectedData){$scope.init=function(){if(angular.isDefined($injectedData.isUserLoggedIn)){$scope.loggedIn=$injectedData.isUserLoggedIn;}else{$scope.loggedIn=false;}
if(angular.isDefined($injectedData.userName)){$scope.userName=$injectedData.userName;}else{$scope.userName='';}};$scope.$on('UPDATE_HEADER_NAME',function(response,data){$scope.userName=data.name;$scope.loggedIn=data.loggedIn;});$scope.init();}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('accountService',['Restangular',function(Restangular){var ACCOUNTS_ENDPOINT='accounts';return{getAccount:function(userId){return Restangular.one(ACCOUNTS_ENDPOINT,userId).get().then(function(account){return account;});}};}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('notificationService',['$cookies','$injectedData',function($cookies,$injectedData){var self={notifications:[],settings:{euCookie:{enabled:true},outdatedBrowser:{enabled:true},subscriptions:{enabled:false},marketing:{enabled:false},maintBar:{enabled:$injectedData.showMaintBar}},init:function(){angular.forEach(self.settings,function(values,method){if(values.enabled){this[method]();}},this);},getNotifications:function(){return self.notifications;},createNotification:function(type,content,closeCallback){self.notifications.push({type:type,content:content,closeCallback:closeCallback});},setCookie:function(cookieName,cookieValue,expiryTime){var today,expires;if(cookieName==='iStockCookiebar'){document.cookie='iStockCookiebar=ilikecookies;'+'path=/;domain=.istockphoto.com;';}else{cookieValue=cookieValue||cookieName+'Closed';if(expiryTime){today=new Date();expires=new Date();expires.setTime(today.getTime()+expiryTime*60*1000);expires=';expires='+expires.toGMTString();}else{expires='';}
document.cookie=cookieName+'='+cookieValue+expires+';path=/;domain=.istockphoto.com;';}},outdatedBrowser:function(){var ie=(window.ActiveXObject&&(/msie\s(\d+)/i.exec(navigator.userAgent)[1]))||NaN;if(ie<=9){self.createNotification('warning','OUTDATED_BROWSER_BAR|http://www.browser-update.org/update.html');}},euCookie:function(){var euroLocales=['fr_FR','de_DE','es_ES','pt_PT','it_IT','pl_PL','ru_RU'],euroGeo=['GB','IE'];if($cookies.iStockCookiebar){return;}
if(euroLocales.indexOf(istock.locale)!==-1||euroGeo.indexOf(istock.georegional)!==-1){self.createNotification('warning','COOKIE_BAR|/privacy.php',function(){self.setCookie('iStockCookiebar');});}},subscriptions:function(){if($cookies.iStockSubsBar){return;}
self.createNotification('info','SUBSCRIBE_BAR|/article.php?ID=1706',function(){self.setCookie('iStockSubsBar');});},marketing:function(){if($cookies.iStockSearchImprovementBar||(istock.siteLang==='EN')||(istock.siteLang==='JA')||(istock.siteLang==='KO')){return;}
self.createNotification('info','MARKETING_BAR',function(){self.setCookie('iStockSearchImprovementBar');});},maintBar:function(){if(!$injectedData.maintenanceBarCookie){return;}
if($cookies[$injectedData.maintenanceBarCookie]){return;}
self.createNotification('warning','MAINT_BAR',function(){self.setCookie($injectedData.maintenanceBarCookie,null,24*60);});}};return self;}]);}());(function(){'use strict';var module=angular.module('globalHeader.directives');module.directive('notificationBar',['cookielessUrl',function(cookielessUrl){return{restrict:'E',transclude:true,scope:{type:'=',closeCallback:'='},template:['<section class="notification-bar {{ type }}">','<span class="text" ng-transclude></span><span class="close">','<a class="close" ng-click="removeBar()">','<img src="',cookielessUrl,'/static/images/blank.gif" class="general-icon-x" />','</a>','</span>','</section>'].join(''),controller:function($scope,$element){$scope.removeBar=function(){$scope.closeCallback();jQuery($element.parent()).slideUp('500ms',function(){$element.parent().remove();});};}};}]);}());(function($){$(document).ready(function(){if($('#content #plans-pricing').length){$('.plans-pricing-link').addClass('header-link-active');}});})(jQuery.noConflict());(function(window,document){'use strict';var features={bind:!!(function(){}.bind),classList:'classList'in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function Debouncer(callback){this.callback=callback;this.ticking=false;}
Debouncer.prototype={constructor:Debouncer,update:function(){this.callback&&this.callback();this.ticking=false;},requestTick:function(){if(!this.ticking){requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this)));this.ticking=true;}},handleEvent:function(){this.requestTick();}};function extend(object){if(arguments.length<=0){throw new Error('Missing arguments in extend function');}
var result=object||{},key,i;for(i=1;i<arguments.length;i++){var replacement=arguments[i]||{};for(key in replacement){if(typeof result[key]==='object'){result[key]=extend(result[key],replacement[key]);}
else{result[key]=result[key]||replacement[key];}}}
return result;}
function Headroom(elem,options){options=extend(options,Headroom.options);this.lastKnownScrollY=0;this.elem=elem;this.debouncer=new Debouncer(this.update.bind(this));this.tolerance=options.tolerance;this.classes=options.classes;this.offset=options.offset;this.initialised=false;this.onPin=options.onPin;this.onUnpin=options.onUnpin;this.onTop=options.onTop;this.onNotTop=options.onNotTop;}
Headroom.prototype={constructor:Headroom,init:function(){if(!Headroom.cutsTheMustard){return;}
this.elem.classList.add(this.classes.initial);setTimeout(this.attachEvent.bind(this),100);return this;},destroy:function(){var classes=this.classes;this.initialised=false;window.removeEventListener('scroll',this.debouncer,false);this.elem.classList.remove(classes.unpinned,classes.pinned,classes.top,classes.initial);},attachEvent:function(){if(!this.initialised){this.lastKnownScrollY=this.getScrollY();this.initialised=true;window.addEventListener('scroll',this.debouncer,false);this.debouncer.handleEvent();}},unpin:function(){var classList=this.elem.classList,classes=this.classes;if(classList.contains(classes.pinned)||!classList.contains(classes.unpinned)){classList.add(classes.unpinned);classList.remove(classes.pinned);this.onUnpin&&this.onUnpin.call(this);}},pin:function(){var classList=this.elem.classList,classes=this.classes;if(classList.contains(classes.unpinned)){classList.remove(classes.unpinned);classList.add(classes.pinned);this.onPin&&this.onPin.call(this);}},top:function(){var classList=this.elem.classList,classes=this.classes;if(!classList.contains(classes.top)){classList.add(classes.top);classList.remove(classes.notTop);this.onTop&&this.onTop.call(this);}},notTop:function(){var classList=this.elem.classList,classes=this.classes;if(!classList.contains(classes.notTop)){classList.add(classes.notTop);classList.remove(classes.top);this.onNotTop&&this.onNotTop.call(this);}},getScrollY:function(){return(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;},getDocumentHeight:function(){var body=document.body,documentElement=document.documentElement;return Math.max(body.scrollHeight,documentElement.scrollHeight,body.offsetHeight,documentElement.offsetHeight,body.clientHeight,documentElement.clientHeight);},isOutOfBounds:function(currentScrollY){var pastTop=currentScrollY<0,pastBottom=currentScrollY+this.getViewportHeight()>this.getDocumentHeight();return pastTop||pastBottom;},toleranceExceeded:function(currentScrollY){return Math.abs(currentScrollY-this.lastKnownScrollY)>=this.tolerance;},shouldUnpin:function(currentScrollY,toleranceExceeded){var scrollingDown=currentScrollY>this.lastKnownScrollY,pastOffset=currentScrollY>=this.offset;return scrollingDown&&pastOffset&&toleranceExceeded;},shouldPin:function(currentScrollY,toleranceExceeded){var scrollingUp=currentScrollY<this.lastKnownScrollY,pastOffset=currentScrollY<=this.offset;return(scrollingUp&&toleranceExceeded)||pastOffset;},update:function(){var currentScrollY=this.getScrollY(),toleranceExceeded=this.toleranceExceeded(currentScrollY);if(this.isOutOfBounds(currentScrollY)){return;}
if(currentScrollY<=this.offset){this.top();}else{this.notTop();}
if(this.shouldUnpin(currentScrollY,toleranceExceeded)){this.unpin();}
else if(this.shouldPin(currentScrollY,toleranceExceeded)){this.pin();}
this.lastKnownScrollY=currentScrollY;}};Headroom.options={tolerance:0,offset:0,classes:{pinned:'searchbar-pinned',unpinned:'searchbar-unpinned',top:'searchbar-top',notTop:'searchbar-not-top',initial:'searchbar'}};Headroom.cutsTheMustard=typeof features!=='undefined'&&features.rAF&&features.bind&&features.classList;window.Headroom=Headroom;}(window,document));(function(module){if(typeof define==='function'&&define.amd){define(['jquery'],module);}else{module(jQuery);}})(function(jQuery,undefined){var
threshold=6,add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node);},requestFrame=(function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn();},25);});})(),ignoreTags={textarea:true,input:true,select:true,button:true},mouseevents={move:'mousemove',cancel:'mouseup dragstart',end:'mouseup'},touchevents={move:'touchmove',cancel:'touchend',end:'touchend'};function Timer(fn){var callback=fn,active=false,running=false;function trigger(time){if(active){callback();requestFrame(trigger);running=true;active=false;}
else{running=false;}}
this.kick=function(fn){active=true;if(!running){trigger();}};this.end=function(fn){var cb=callback;if(!fn){return;}
if(!running){fn();}
else{callback=active?function(){cb();fn();}:fn;active=true;}};}
function returnTrue(){return true;}
function returnFalse(){return false;}
function preventDefault(e){e.preventDefault();}
function preventIgnoreTags(e){if(ignoreTags[e.target.tagName.toLowerCase()]){return;}
e.preventDefault();}
function isLeftButton(e){return(e.which===1&&!e.ctrlKey&&!e.altKey);}
function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch){return touchList.identifiedTouch(id);}
i=-1;l=touchList.length;while(++i<l){if(touchList[i].identifier===id){return touchList[i];}}}
function changedTouch(e,event){var touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return;}
if(touch.pageX===event.pageX&&touch.pageY===event.pageY){return;}
return touch;}
function mousedown(e){var data;if(!isLeftButton(e)){return;}
data={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp};add(document,mouseevents.move,mousemove,data);add(document,mouseevents.cancel,mouseend,data);}
function mousemove(e){var data=e.data;checkThreshold(e,data,e,removeMouse);}
function mouseend(e){removeMouse();}
function removeMouse(){remove(document,mouseevents.move,mousemove);remove(document,mouseevents.cancel,mouseend);}
function touchstart(e){var touch,template;if(ignoreTags[e.target.tagName.toLowerCase()]){return;}
touch=e.changedTouches[0];template={target:touch.target,startX:touch.pageX,startY:touch.pageY,timeStamp:e.timeStamp,identifier:touch.identifier};add(document,touchevents.move+'.'+touch.identifier,touchmove,template);add(document,touchevents.cancel+'.'+touch.identifier,touchend,template);}
function touchmove(e){var data=e.data,touch=changedTouch(e,data);if(!touch){return;}
checkThreshold(e,data,touch,removeTouch);}
function touchend(e){var template=e.data,touch=identifiedTouch(e.changedTouches,template.identifier);if(!touch){return;}
removeTouch(template.identifier);}
function removeTouch(identifier){remove(document,'.'+identifier,touchmove);remove(document,'.'+identifier,touchend);}
function checkThreshold(e,template,touch,fn){var distX=touch.pageX-template.startX,distY=touch.pageY-template.startY;if((distX*distX)+(distY*distY)<(threshold*threshold)){return;}
triggerStart(e,template,touch,distX,distY,fn);}
function handled(){this._handled=returnTrue;return false;}
function flagAsHandled(e){e._handled();}
function triggerStart(e,template,touch,distX,distY,fn){var node=template.target,touches,time;touches=e.targetTouches;time=e.timeStamp-template.timeStamp;template.type='movestart';template.distX=distX;template.distY=distY;template.deltaX=distX;template.deltaY=distY;template.pageX=touch.pageX;template.pageY=touch.pageY;template.velocityX=distX/time;template.velocityY=distY/time;template.targetTouches=touches;template.finger=touches?touches.length:1;template._handled=handled;template._preventTouchmoveDefault=function(){e.preventDefault();};trigger(template.target,template);fn(template.identifier);}
function activeMousemove(e){var timer=e.data.timer;e.data.touch=e;e.data.timeStamp=e.timeStamp;timer.kick();}
function activeMouseend(e){var event=e.data.event,timer=e.data.timer;removeActiveMouse();endEvent(event,timer,function(){setTimeout(function(){remove(event.target,'click',returnFalse);},0);});}
function removeActiveMouse(event){remove(document,mouseevents.move,activeMousemove);remove(document,mouseevents.end,activeMouseend);}
function activeTouchmove(e){var event=e.data.event,timer=e.data.timer,touch=changedTouch(e,event);if(!touch){return;}
e.preventDefault();event.targetTouches=e.targetTouches;e.data.touch=touch;e.data.timeStamp=e.timeStamp;timer.kick();}
function activeTouchend(e){var event=e.data.event,timer=e.data.timer,touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return;}
removeActiveTouch(event);endEvent(event,timer);}
function removeActiveTouch(event){remove(document,'.'+event.identifier,activeTouchmove);remove(document,'.'+event.identifier,activeTouchend);}
function updateEvent(event,touch,timeStamp,timer){var time=timeStamp-event.timeStamp;event.type='move';event.distX=touch.pageX-event.startX;event.distY=touch.pageY-event.startY;event.deltaX=touch.pageX-event.pageX;event.deltaY=touch.pageY-event.pageY;event.velocityX=0.3*event.velocityX+0.7*event.deltaX/time;event.velocityY=0.3*event.velocityY+0.7*event.deltaY/time;event.pageX=touch.pageX;event.pageY=touch.pageY;}
function endEvent(event,timer,fn){timer.end(function(){event.type='moveend';trigger(event.target,event);return fn&&fn();});}
function setup(data,namespaces,eventHandle){add(this,'movestart.move',flagAsHandled);return true;}
function teardown(namespaces){remove(this,'dragstart drag',preventDefault);remove(this,'mousedown touchstart',preventIgnoreTags);remove(this,'movestart',flagAsHandled);return true;}
function addMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return;}
add(this,'dragstart.'+handleObj.guid+' drag.'+handleObj.guid,preventDefault,undefined,handleObj.selector);add(this,'mousedown.'+handleObj.guid,preventIgnoreTags,undefined,handleObj.selector);}
function removeMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return;}
remove(this,'dragstart.'+handleObj.guid+' drag.'+handleObj.guid);remove(this,'mousedown.'+handleObj.guid);}
jQuery.event.special.movestart={setup:setup,teardown:teardown,add:addMethod,remove:removeMethod,_default:function(e){var event,data;if(!e._handled()){return;}
function update(time){updateEvent(event,data.touch,data.timeStamp);trigger(e.target,event);}
event={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger};data={event:event,timer:new Timer(update),touch:undefined,timeStamp:undefined};if(e.identifier===undefined){add(e.target,'click',returnFalse);add(document,mouseevents.move,activeMousemove,data);add(document,mouseevents.end,activeMouseend,data);}
else{e._preventTouchmoveDefault();add(document,touchevents.move+'.'+e.identifier,activeTouchmove,data);add(document,touchevents.end+'.'+e.identifier,activeTouchend,data);}}};jQuery.event.special.move={setup:function(){add(this,'movestart.move',jQuery.noop);},teardown:function(){remove(this,'movestart.move',jQuery.noop);}};jQuery.event.special.moveend={setup:function(){add(this,'movestart.moveend',jQuery.noop);},teardown:function(){remove(this,'movestart.moveend',jQuery.noop);}};add(document,'mousedown.move',mousedown);add(document,'touchstart.move',touchstart);if(typeof Array.prototype.indexOf==='function'){(function(jQuery,undefined){var props=["changedTouches","targetTouches"],l=props.length;while(l--){if(jQuery.event.props.indexOf(props[l])===-1){jQuery.event.props.push(props[l]);}}})(jQuery);};});(function(module){if(typeof define==='function'&&define.amd){define(['jquery'],module);}else{module(jQuery);}})(function(jQuery,undefined){var add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node);},settings={threshold:0.4,sensitivity:6};function moveend(e){var w,h,event;w=e.currentTarget.offsetWidth;h=e.currentTarget.offsetHeight;event={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger};if(e.distX>e.distY){if(e.distX>-e.distY){if(e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type='swiperight';trigger(e.currentTarget,event);}}
else{if(-e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type='swipeup';trigger(e.currentTarget,event);}}}
else{if(e.distX>-e.distY){if(e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type='swipedown';trigger(e.currentTarget,event);}}
else{if(-e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type='swipeleft';trigger(e.currentTarget,event);}}}}
function getData(node){var data=jQuery.data(node,'event_swipe');if(!data){data={count:0};jQuery.data(node,'event_swipe',data);}
return data;}
jQuery.event.special.swipe=jQuery.event.special.swipeleft=jQuery.event.special.swiperight=jQuery.event.special.swipeup=jQuery.event.special.swipedown={setup:function(data,namespaces,eventHandle){var data=getData(this);if(data.count++>0){return;}
add(this,'moveend',moveend);return true;},teardown:function(){var data=getData(this);if(--data.count>0){return;}
remove(this,'moveend',moveend);return true;},settings:settings};});(function($){var ocSwipe=function(){var _ocWrap=$('body .off-canvas-wrap');var _directionsAry=['left','right'];var _curDirection;$.each(_directionsAry,function(i,v){_ocWrap.on('swipe'+v,function(){_curDirection=v;onSwipe();}).on('movestart',function(e){if((e.distX>e.distY&&e.distX<-e.distY)||(e.distX<e.distY&&e.distX>-e.distY)){e.preventDefault();}});})
function getReverseDirection(){if(_directionsAry[0]===_curDirection){_directionsAry.reverse();}
return _directionsAry[0];};function onSwipe(){if(isOpen()){doSwipeClose();}else{doSwipeOpen();}};function doSwipeOpen(){var reverse=getReverseDirection();var openAnchor=_ocWrap.find('a.'+reverse+'-off-canvas-toggle');openAnchor.trigger('click');};function doSwipeClose(){var closeAnchor=$('.'+_curDirection+'-off-canvas-menu').find('a.exit-off-canvas');closeAnchor.trigger('click');};function isOpen(){if(_ocWrap.hasClass('move-left')||_ocWrap.hasClass('move-right')){return true;}
return false;};};if(Modernizr.touch){ocSwipe();}})(jQuery.noConflict());function goTo(option){window.location=option.value;}
jQuery(function($){$('footer .languages select').change(function(){goTo(this);});var initLanguageDropDown=function(){var languageBox=$('footer .language-box');var optionsContainer=languageBox.find('div.languages-options');var finalHeight=getFinalHeight();function getFinalHeight(){optionsContainer.height('auto');finalHeight=optionsContainer.height();optionsContainer.height(0).show();return finalHeight;}
function showLanguages(){languageBox.addClass('active');if(finalHeight<=0){finalHeight=getFinalHeight();}
optionsContainer.animate({height:finalHeight},350,'easeOutCubic');}
function hideLanguages(){languageBox.removeClass('active');optionsContainer.animate({height:0},450,'easeInCubic');}
languageBox.click(function(){if($(this).hasClass('active')){hideLanguages();}else{showLanguages();}}).mouseleave(function(){if($(this).hasClass('active')){hideLanguages($(this));}});};initLanguageDropDown();});